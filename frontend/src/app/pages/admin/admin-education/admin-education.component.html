<div class="add-education-container">
  <h1>{{ isEditMode ? 'Edit' : 'Add' }} an education entry</h1>
  
  <div class="mb-4">
    <button class="btn btn-primary" (click)="openModal()">
      <i class="bi bi-plus-circle"></i> Add New Education
    </button>
  </div>

  <!-- Success -->
  <div *ngIf="successMessage" class="alert alert-success">
    {{ successMessage }}
  </div>
  
  <!-- Error -->
  <div *ngIf="errorMessage" class="alert alert-danger">
    {{ errorMessage }}
  </div>
  
  <!-- Form -->
  <div class="modal fade" [class.show]="isModalOpen" [style.display]="isModalOpen ? 'block' : 'none'" tabindex="-1" role="dialog" aria-labelledby="educationModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="educationModalLabel">{{ isEditMode ? 'Edit' : 'Add' }} Education</h5>
          <button type="button" class="btn-close" aria-label="Close" (click)="closeModal()"></button>
        </div>
        <div class="modal-body">
          <!-- Form -->
          <form [formGroup]="EducationForm" (ngSubmit)="onSubmit()">
            <!-- Institution -->
            <div class="form-group mb-3">
              <label for="institution">Institution *</label>
              <input 
                type="text" 
                id="institution" 
                formControlName="institution" 
                class="form-control" 
                [ngClass]="{ 'is-invalid': isSubmitted && EducationForm.get('institution')?.errors }" 
              />
              <div *ngIf="isSubmitted && EducationForm.get('institution')?.errors" class="invalid-feedback">
                Institution is required
              </div>
            </div>
            
            <!-- Degree -->
            <div class="form-group mb-3">
              <label for="degree">Degree *</label>
              <input 
                type="text" 
                id="degree" 
                formControlName="degree" 
                class="form-control" 
                [ngClass]="{ 'is-invalid': isSubmitted && EducationForm.get('degree')?.errors }" 
              />
              <div *ngIf="isSubmitted && EducationForm.get('degree')?.errors" class="invalid-feedback">
                Degree is required
              </div>
            </div>
            
            <!-- Location -->
            <div class="form-group mb-3">
              <label for="location">Location *</label>
              <input 
                type="text" 
                id="location" 
                formControlName="location" 
                class="form-control" 
                [ngClass]="{ 'is-invalid': isSubmitted && EducationForm.get('location')?.errors }" 
              />
              <div *ngIf="isSubmitted && EducationForm.get('location')?.errors" class="invalid-feedback">
                Location is required
              </div>
            </div>
            
            <!-- Field of Study -->
            <div class="form-group mb-3">
              <label for="field_of_study">Field of Study *</label>
              <input 
                type="text" 
                id="field_of_study" 
                formControlName="field_of_study" 
                class="form-control" 
                [ngClass]="{ 'is-invalid': isSubmitted && EducationForm.get('field_of_study')?.errors }" 
              />
              <div *ngIf="isSubmitted && EducationForm.get('field_of_study')?.errors" class="invalid-feedback">
                Field of study is required
              </div>
            </div>
            
            <!-- Start Date -->
            <div class="form-group mb-3">
              <label for="start_date">Start Date *</label>
              <input 
                type="date" 
                id="start_date" 
                formControlName="start_date" 
                class="form-control" 
                [ngClass]="{ 'is-invalid': isSubmitted && EducationForm.get('start_date')?.errors }" 
              />
              <div *ngIf="isSubmitted && EducationForm.get('start_date')?.errors" class="invalid-feedback">
                Start date is required
              </div>
            </div>
            
            <!-- Current -->
            <div class="form-check mb-3">
              <input 
                type="checkbox" 
                id="current" 
                formControlName="current" 
                class="form-check-input"
              />
              <label class="form-check-label" for="current">Currently studying</label>
            </div>
            
            <!-- End Date (conditional) -->
            <div class="form-group mb-3" *ngIf="!EducationForm.get('current')?.value">
              <label for="end_date">End Date</label>
              <input 
                type="date" 
                id="end_date" 
                formControlName="end_date" 
                class="form-control"
              />
            </div>
            
            <!-- Description -->
            <div class="form-group mb-3">
              <label for="description">Description *</label>
              <textarea 
                id="description" 
                formControlName="description" 
                class="form-control" 
                rows="5"
                [ngClass]="{ 'is-invalid': isSubmitted && EducationForm.get('description')?.errors }"
              ></textarea>
              <div *ngIf="isSubmitted && EducationForm.get('description')?.errors" class="invalid-feedback">
                Description is required
              </div>
            </div>
          </form>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" (click)="closeModal()">Cancel</button>
          <button type="button" class="btn btn-primary" (click)="onSubmit()">{{ isEditMode ? 'Update' : 'Save' }}</button>
        </div>
      </div>
    </div>
  </div>
  
  <!-- Modal backdrop -->
  <div class="modal-backdrop fade show" *ngIf="isModalOpen"></div>

<div class="show-education-list">
  <h2>List of your educational background</h2>
  
  <div *ngIf="educations_list.length === 0" class="alert alert-info">
    No education entries added yet.
  </div>
  
  <div class="education-list">
    <div *ngFor="let edu of educations_list" class="education-item">
      <div class="education-header d-flex justify-content-between align-items-start">
        <div>
          <span class="education-date">
            {{ formatDate(edu.start_date) }} - {{ edu.current ? 'Present' : formatDate(edu.end_date) }}
          </span>
          <h3 class="education-title">{{ edu.degree }} in {{ edu.field_of_study }} at {{ edu.institution }}</h3>
        </div>
        
        <!-- Action buttons -->
        <div class="education-actions">
          <!-- Edit button -->
          <button 
            class="btn btn-sm btn-outline-primary me-2" 
            (click)="editEducation(edu)"
            [disabled]="isEditMode && currentEditId !== edu.id"
          >
            <i class="bi bi-pencil"></i> Edit
          </button>
          
          <!-- Delete button -->
          <button 
            *ngIf="deleteConfirmationId !== edu.id" 
            class="btn btn-sm btn-outline-danger" 
            (click)="confirmDelete(edu.id)"
            [disabled]="isEditMode && currentEditId === edu.id"
          >
            <i class="bi bi-trash"></i> Delete
          </button>
          
          <!-- Delete confirmation -->
          <div *ngIf="deleteConfirmationId === edu.id" class="delete-confirmation">
            <span class="me-2">Are you sure?</span>
            <button class="btn btn-sm btn-danger me-1" (click)="deleteExperience(edu.id)">Yes</button>
            <button class="btn btn-sm btn-secondary" (click)="cancelDelete()">No</button>
          </div>
        </div>
      </div>
      
      <p class="education-description">{{ edu.description }}</p>
      <hr>
    </div>
  </div>
</div>
</div>